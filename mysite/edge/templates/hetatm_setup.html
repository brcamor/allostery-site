{% extends 'base.html' %}

{% block header_text %} Protein Set-up: {{ pdb_id }} {% endblock %}

{% block header_sub_text %}
Select the heteroatoms you would like to include in the analysis 
{% endblock %}

{% block protein_view  %}

<div id="jmol_protein_view" align="center">
<script type="text/javascript">
  var Info = {
  width: 800,
  height: 500,
    use: "WebGL HTML5",
  j2sPath: "static/jsmol/j2s",
  console: "jmolApplet0_infodiv"
  }
  jmolApplet0 = Jmol.getApplet("jmolApplet0", Info);
  Jmol.script(jmolApplet0,'background black;load {{ MEDIA_URL }}{{ pdb_file }};select all;cartoon only; color lightgrey;set hermiteLevel 3; select hetero and not solvent; wireframe on;wireframe 50;spacefill 25%;')

function colorHetatmRed(chkbox, chainID, resNum){
if (chkbox.checked) {
  Jmol.script (jmolApplet0,'select ' + resNum + ':' + chainID + '; color red;');
  }
else {
 Jmol.script (jmolApplet0,'select ' + resNum + ':' + chainID + '; color lightgrey;');
}
}
</script>

{% endblock %}


{% block table %}

<form role="form" method="POST" action="">
  <table class="table" id="id_hetatm_table">
    <thead>
      <tr>
	<th>Name</th>
	<th>Chain</th>
	<th>Number</th>
	<th>Selected</th>
      </tr>
    </thead>
    
    <tbody>
      {% for item in hetatms %}
      <tr>
	<td>{{ forloop.counter }}: {{ item.0 }}</td>
	<td>{{item.1}}</td>
	<td>{{item.2}}</td>
        <td><input type="checkbox" id="hetatm_checkbox_{{forloop.counter}}" name="hetatms" value="{{forloop.counter | add:"-1" }}" onclick="colorHetatmRed(this, '{{item.1}}','{{item.2}}')"></td>
      </tr>
      {% endfor %}
    </tbody>
  
  </table>
  
  {% csrf_token %}
  <input type="submit" class="btn btn-large btn-primary" id="continue_button" value="Continue">
</form>
  
{% endblock %}
